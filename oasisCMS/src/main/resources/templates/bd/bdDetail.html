<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout.html}">
<head>
<meta charset="UTF-8">
<title>게시판 상세 조회</title>
<script>
</script>
</head>
<body>
<div layout:fragment="content">
	
	<div class="detailBody">
		<label>글번호</label><span th:text="${bdDTO.bdId}"></span>
		<label>제목</label><span style="width:200px " th:text="${bdDTO.title}">제목</span> <br>
		<label>작성자</label><span th:text="${bdDTO.memberNick}">작성자</span>
		<label>조회수</label><span th:text="${bdDTO.readCnt}"></span>
		<label>작성일</label><span th:text="${#dates.format(bdDTO.createDt, 'yy-MM-dd hh:mm:ss')}"></span>&emsp;<br>
		<hr>
		<div><span th:utext="${bdDTO.content}"></span></div>
	</div>
	<hr>
	<div align="right" class="mybtn" th:if="${session.memberId == bdDTO.memberId}">
		<input type="button" value="수정" th:onclick="|location.href='@{/bd/updateBd(bdId=${#strings.toString(bdDTO.bdId)})}'|" />
		<input type="button" value="삭제" th:onclick="|location.href='@{/bd/deleteBd(bdId=${#strings.toString(bdDTO.bdId)})}'|" /><br><br>
		<span class="mybtn" th:if="${session.memberId != null}">
			<input type="button" value="글쓰기" th:onclick="checkSession()" />
		</span>
		<input type="button" value="목록보기" th:onclick="|location.href='@{/bd/main}'|" />
	</div>

	<!-- 댓글 목록 -->
	<!-- 
	id에 번호를 붙여서 for문을 돌 때, js에서 id번호에 맞게 수정 틀이 나오도록 한다. 
	두 번째 댓글 화면 만들기
	 -->

	<!-- 댓글 기능 -->
	<div class="mybtn" th:if="${session.memberId != null}">
		<input type="button" value="댓글쓰기" th:onclick='|location.href="@{/repl/createRepl(bdId=${bdDTO.bdId}, memberId=${bdDTO.memberId})}"|'/>
	</div>
	<div align="center" th:each="replDTO : ${replList}" >
         <span th:text="|댓글번호:${replDTO.replId}|">번호</span>
         <span 	th:text="${replDTO.memberNick}">작성자</span>
         <span th:text="${#dates.format(replDTO.createDt , 'yyyy-MM-dd')}">등록일</span>
         <div th:id="'content' + ${replDTOStat.index}">
	         <span th:text="${replDTO.content}">내용</span>
	         <input type="hidden" th:id="'hdContent' + ${replDTOStat.index}" th:value ="${replDTO.content}"/>
		        <span class="mybtn" th:if="${session.memberId == bdDTO.memberId}">
		         	<input type="button" id="uBtn" value="수정" th:onclick='|location.href="@{/repl/updateRepl(bdId=${bdDTO.bdId},replId=${replDTO.replId})}"|' />
					<input type="button" id="dBtn" value="삭제" th:onclick='|location.href="@{/repl/deleteRepl(bdId=${bdDTO.bdId},replId=${replDTO.replId})}"|' />
				</span>
		 </div>
	</div>
</div>
</body>
</html>